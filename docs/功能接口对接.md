## 功能接口对接

D:\code\github\tvpage\docs\dv.yaml 是下载音频的接口文档 请求路径为: 192.168.191.168:3456 
D:\code\github\tvpage\docs\tv.json 是转码的接口文档 请求路径为: 192.168.191.168:6789

1. 视频输入 链接 / 上传视频  二个都有的情况下使用 链接 发起请求 


如果是上传视频 那么直接走转码的接口 

如果是链接输入 需要走下载接口 调用之后 不断轮询接口 更新右上角的状态  然后走转码的接口 

- 根据状态status 来跟新右视角的显示内容 如果有错误根据error字段来显示错误信息  其他时候按状态给出中文提示
{
    "id": "cb854c05-b87d-4fe7-9e63-31fff95ef4f0",
    "url": "https://v.douyin.com/XZVpfWQaPLE/",
    "quality": "audio_worst",
    "status": "success",
    "location": "http://192.168.191.168",
    "error": null,
    "createdAt": 1766994357319,
    "startedAt": 1766994357608,
    "finishedAt": 1766994387451,
    "strategy": "puppeteerStrategy",
    "output": "downloads/2025-12-29T07-46-19.666Z.mp3",
    "outputName": "2025-12-29T07-46-19.666Z.mp3",
    "fullPath": "http://192.168.191.168:3456/downloads/2025-12-29T07-46-19.666Z.mp3"
}

调用转码详情接口 ， 如果返回的状态为running 那么停止轮询调用  sse接口 显示在转写结果中 



需要注意处理的格式 ：

[23:21:15] � 状态: running
         �️  正在执行: 1 个任务

[23:21:16] � 状态: running
         �️  正在执行: 1 个任务
         � 转写输出:
            [254.10s -> 257.10s] 纵使被龙卷锋打的面目全非意识模糊
            [257.10s -> 260.10s] 但他依旧死死抓住阻拦锁不愿松手
            [260.10s -> 261.10s] 直到咽下最后一口气
            [261.10s -> 263.10s] 这才缓缓倒在了内台上
            [263.10s -> 265.10s] 原本红正南只需要认输就能活下来
            [265.10s -> 268.10s] 可他却用生命捍卫了中国武士的尊严
            [268.10s -> 270.10s] 次日叶问参加了追道仪式
            [270.10s -> 271.10s] 看着红正南的一项
            [271.10s -> 274.10s] 叶问发誓一定要让肖章的洋人付出代价
            [274.10s -> 275.10s] 红师父
            [275.10s -> 278.10s] 你是我叶问一生最惊重的师父
            [278.10s -> 281.10s] 与此同时西洋全王擊败红泉宗师的消息传
[23:21:22] ✅ 状态: success
         ⚡ 状态已变化!
         �️  正在执行: 0 个任务
         � 输出文件: 6434aa72-6bdf-4b53-9adc-3ff8006ba521_small.srt    


转译结果只显示输出文字 

当状态为success的时候 停止sse   再次调用转译详情接口 

拼接下载字幕路径 ： tv.itclass.top/static/${result.output_name}

点击复制文本 需要调用转译接口 /tts/srt-to-txt 拿到参数后 直接黏贴到剪切板 （适配移动 pc）


注意 ： 每次调用详情（下载/转码）接口时）接口 都需要更新状态